<ion-header>
    <ion-toolbar class="header-color" style="font-weight: bold;">
        <ion-buttons slot="start">
            <ion-button (click)="regresar()">
                <ion-icon slot="icon-only" name="arrow-back" style="color: white;"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title>Horario Disponible</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content class="ion-content">
    <ion-card class="ion-card">
        <ion-card-content>
            <form [formGroup]="agendarForm">
                <ion-grid>
                    <ion-row>
                        <ion-col>
                            <ionic-selectable
                                formControlName="tienda" 
                                [items]="tiendas"
                                itemValueField="id"
                                itemTextField="nombre"
                                [canSearch]="true"
                                placeholder="Seleccionar Pet Shop"
                                (onChange)="cargarHorarios()"
                                class="input">
                            </ionic-selectable>
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col size="10">
                            <ion-input type="text" formControlName="fecha" readonly="readonly" placeholder="Fecha (dd-MM-yyyy)" (click)="mostrarCalendario()" class="input"></ion-input>
                        </ion-col>
                        <ion-col size="2" style="text-align: center;">
                            <ion-icon name="calendar-outline" style="font-size: 30px; color: #E85929;" (click)="mostrarCalendario()"></ion-icon>
                        </ion-col>
                    </ion-row>
                </ion-grid>
            </form>

            <ion-list>
                <ion-item *ngFor="let hora of horas" (click)="solicitar(hora)">
                    <ion-row *ngIf="hora.disponible == 0" style="width: 100%; color: red;">
                        <ion-col size="3">
                            {{ hora.hora }}
                        </ion-col>
                        <ion-col size="9">
                            Ocupado
                        </ion-col>
                    </ion-row>
                    <ion-row *ngIf="hora.disponible > 0" style="width: 100%;">
                        <ion-col size="3">
                            {{ hora.hora }}
                        </ion-col>
                        <ion-col size="9">
                            Disponible para {{ hora.disponible }} peludito<span *ngIf="hora.disponible > 1">s</span>.
                        </ion-col>
                    </ion-row>
                </ion-item>
                <ion-item *ngIf="horas.length == 0">
                    <ion-row style="width: 100%;">
                        <ion-col size="12" class="center">
                            No hay horas disponibles, consulta otro d&iacute;a.
                        </ion-col>
                    </ion-row>
                </ion-item>
            </ion-list>                       
        </ion-card-content>
    </ion-card>
</ion-content>
